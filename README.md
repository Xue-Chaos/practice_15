# practice_15
任务二（总分：47分）
任务描述：请基于ZigBee模块（黑板）模拟实现安防报警系统。系统上电后默认在撤防模式，此时D5灯每500ms闪烁一次，接下SW1后系统进入设防状态，SW2为模拟报警按键，SW2未按下时无报警此时D3 D4 D6灭，当SW2按下后D3 D4 D6进行跑马灯报警，报警状态保持10秒。
设备列表：
1、ZigBee模块（黑板）1块+电源线
2、USB转串口线1根
3、CC Debugger仿真器1个

任务要求：
用USB转串口线将ZigBee模块（黑板）连接至PC机的串口。
在 “C:\JoyWork\01\work\Task\”文件夹下创建IAR工程，工程名字和工作空间的名字均为：“Task+准考证号后12位”，把“Task” 文件夹下的“test.c”添加到IAR工程中，配置好工程选项参数，确保工程编译成功。（4分）。在“test.c”中添加代码实现以下功能：（题目中涉及到的变量均已在text.c中声明） 
1、系统有两种工作模式：布防模式和撤防模式。
1）通过按键SW1切换sys_state的值来改变工作模式 
2）撤防模式：sys_state=0 
布防模式：sys_state=1 
3）系统一上电，处于撤防模式。
2、使用定时器1来产生10ms的定时。定时器1已设置好采用32MHz系统时钟、32分频、模模式、通道0比较模式、比较值T1CC0为10000，此时定时器1每10ms产生一次中断，本部分代码已提供，考生无需处理。
3、系统已设置好使用串口0，波特率为9600，考生无需处理。
4、系统一上电，处于撤防模式，D5每500ms闪烁一次，其他灯熄灭。要求使用定时器1的中断次数来控制闪烁时间。（10分）
5、按键SW1采用中断方式，用于布防与撤防切换，上拉输入模式，下降沿中断。SW2为报警信号输入端，查询方式检测。（18分）
1）按下SW1后，系统进入布防模式，D5进入常亮状态
2）再次按下SW1后，系统回到撤防模式的D5闪烁状态 
3）在布防与撤防切换时，往串口输出相应的提示信息： 
设防：SYSTEM RUN<回车换行>
撤防：SYSTEM STOP<回车换行>
把串口助手输出信息进行截图保存至“图集.docx”中的8.png处。
6、在布防模式时，按下SW2能使D3 D4 D6进入跑马灯报警状态。（15分）
要求：
1）在SW2按下后，触发报警，报警时 D3 D4 D6轮流点亮，为跑马灯效果，每个灯约500ms亮。
2）跑马灯效果保持约10秒后D3 D4 D6全部熄灭
3）在布防报警时，按SW1撤防后报警应立即停止。
7、考试时间截止后，确保“图集.docx”和源码工程文件已保存后， 对work文件夹进行压缩，点击“上传文件”将压缩后的“work.zip”上传至服务器指定目录。
![image](https://user-images.githubusercontent.com/104015167/200779548-92b51187-ca65-45bc-b9e6-98fea54f4279.png)
